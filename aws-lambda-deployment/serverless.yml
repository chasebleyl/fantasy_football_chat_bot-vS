org: chasebleyl
app: fantasy-football-discord-bot
service: fantasy-football-discord-bot
frameworkVersion: '3'
custom: ${file(./config.yaml)}
plugins:
  - serverless-python-requirements
provider:
  name: aws
  runtime: python3.8
  environment:
    DISCORD_WEBHOOK_URL: ${self:custom.environment.discordWebhookUrl}
    END_DATE: ${self:custom.environment.endDate}
    ESPN_S2: ${self:custom.environment.espnS2}
    EXTRA_TROPHIES: ${self:custom.environment.extraTrophies}
    LEAGUE_ID: ${self:custom.environment.leagueId}
    LEAGUE_YEAR: ${self:custom.environment.leagueYear}
    RANDOM_PHRASE: ${self:custom.environment.randomPhrase}
    START_DATE: ${self:custom.environment.startDate}
    SWID: ${self:custom.environment.swid}
    TEST: ${self:custom.environment.test}
    TOP_HALF_SCORING: ${self:custom.environment.topHalfScoring}
    # FAAB: ${self:custom.environment.faab}
    # USERS: ${self:custom.environment.users}
    # EMOTES: ${self:custom.environment.emotes}

functions:
  # DELAY-AGNOSTIC
  sundayScore:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.sundayScore.function}
    events: ${self:custom.sundayScore.events}
  headsUpReport:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.headsUpReport.function}
    events: ${self:custom.headsUpReport.events}
  matchups:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.matchups.function}
    events: ${self:custom.matchups.events}
  inactives:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.inactives.function}
    events: ${self:custom.inactives.events}
  trades:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.trades.function}
    events: ${self:custom.trades.events}
  # DELAY-IMPACTED LAMBDAS (controlled by commented configs in config.yaml)
  fridayAndMondayScore:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.fridayAndMondayScore.function}
    events: ${self:custom.fridayAndMondayScore.events}
  closeScores:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.closeScores.function}
    events: ${self:custom.closeScores.events}
  finalScores:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.finalScores.function}
    events: ${self:custom.finalScores.events}
  standings:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.standings.function}
    events: ${self:custom.standings.events}
  powerRankings:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.powerRankings.function}
    events: ${self:custom.powerRankings.events}
  waiver:
    handler: handler.run
    environment:
      FUNCTION: ${self:custom.waiver.function}
    events: ${self:custom.waiver.events}

